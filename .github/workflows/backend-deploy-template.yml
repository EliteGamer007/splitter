name: Backend Deploy (Template)

on:
  workflow_dispatch:

permissions:
  contents: read

jobs:
  deploy-instance-1:
    runs-on: ubuntu-latest
    env:
      INSTANCE1_HOOK: ${{ secrets.BACKEND_INSTANCE1_DEPLOY_HOOK_URL }}
    steps:
      - name: Trigger Instance 1 deploy hook
        shell: bash
        run: |
          if [ -z "${INSTANCE1_HOOK}" ]; then
            echo "Skipping instance-1 deploy: BACKEND_INSTANCE1_DEPLOY_HOOK_URL is not configured."
            exit 0
          fi
          curl -fsS -X POST "${INSTANCE1_HOOK}"

  deploy-instance-2:
    runs-on: ubuntu-latest
    env:
      INSTANCE2_HOOK: ${{ secrets.BACKEND_INSTANCE2_DEPLOY_HOOK_URL }}
    steps:
      - name: Trigger Instance 2 deploy hook
        shell: bash
        run: |
          if [ -z "${INSTANCE2_HOOK}" ]; then
            echo "Skipping instance-2 deploy: BACKEND_INSTANCE2_DEPLOY_HOOK_URL is not configured."
            exit 0
          fi
          curl -fsS -X POST "${INSTANCE2_HOOK}"
