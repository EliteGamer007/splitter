name: Backend Deploy (Template)

on:
  push:
    branches: [ main ]
  workflow_dispatch:

permissions:
  contents: read

jobs:
  deploy-instance-1:
    runs-on: ubuntu-latest
    if: ${{ secrets.BACKEND_INSTANCE1_DEPLOY_HOOK_URL != '' }}
    steps:
      - name: Trigger Instance 1 deploy hook
        run: curl -fsS -X POST "${{ secrets.BACKEND_INSTANCE1_DEPLOY_HOOK_URL }}"

  deploy-instance-2:
    runs-on: ubuntu-latest
    if: ${{ secrets.BACKEND_INSTANCE2_DEPLOY_HOOK_URL != '' }}
    steps:
      - name: Trigger Instance 2 deploy hook
        run: curl -fsS -X POST "${{ secrets.BACKEND_INSTANCE2_DEPLOY_HOOK_URL }}"
